QL\Hal\Core\Entity\Build:
    type: entity
    repositoryClass: QL\Hal\Core\Repository\BuildRepository
    table: Builds

    id:
        id:
            column: BuildId
            type: string
            length: 40

    fields:

        created:
            column: BuildCreated
            type: timepoint
            nullable: true
        start:
            column: BuildStart
            type: timepoint
            nullable: true
        end:
            column: BuildEnd
            type: timepoint
            nullable: true

        status:
            column: BuildStatus
            type: buildstatusenum

        branch:
            column: BuildBranch
            type: string
            length: 64
        commit:
            column: BuildCommit
            type: string
            length: 40

    manyToOne:

        user:
            cache: {usage : READ_ONLY}
            targetEntity: User
            inversedBy: builds
            joinColumn:
                name: UserId
                referencedColumnName: UserId
                nullable: true

        application:
            cache: {usage : READ_ONLY}
            targetEntity: Application
            joinColumn:
                name: RepositoryId
                referencedColumnName: RepositoryId

        environment:
            cache: {usage : READ_ONLY}
            targetEntity: Environment
            joinColumn:
                name: EnvironmentId
                referencedColumnName: EnvironmentId

    oneToMany:

        logs:
            targetEntity: EventLog
            mappedBy: build
            orderBy:
                event: ASC
                order: ASC
