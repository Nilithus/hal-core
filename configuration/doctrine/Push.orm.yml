QL\Hal\Core\Entity\Push:
    type: entity
    repositoryClass: QL\Hal\Core\Repository\PushRepository
    table: Pushes

    id:
        id:
            column: PushId
            type: string
            length: 40

    fields:

        created:
            column: PushCreated
            type: timepoint
            nullable: true
        start:
            column: PushStart
            type: timepoint
            nullable: true
        end:
            column: PushEnd
            type: timepoint
            nullable: true

        status:
            column: PushStatus
            type: pushstatusenum

    manyToOne:

        user:
            cache: {usage : READ_ONLY}
            targetEntity: User
            inversedBy: pushes
            joinColumn:
                name: UserId
                referencedColumnName: UserId
                nullable: true

        build:
            cache: {usage : READ_ONLY}
            targetEntity: Build
            joinColumn:
                name: BuildId
                referencedColumnName: BuildId

        deployment:
            cache: {usage : READ_ONLY}
            targetEntity: Deployment
            inversedBy: pushes
            joinColumn:
                name: DeploymentId
                referencedColumnName: DeploymentId
                nullable: true

        application:
            cache: {usage : READ_ONLY}
            targetEntity: Application
            joinColumn:
                name: RepositoryId
                referencedColumnName: RepositoryId

    oneToMany:

        logs:
            targetEntity: EventLog
            mappedBy: push
            orderBy:
                event: ASC
                order: ASC
